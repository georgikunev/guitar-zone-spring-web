<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{fragments/head}">
    <title>Order Details</title>
</head>
<body class="sub_page">
<div th:replace="~{fragments/navbar}"></div>

<section class="order_details_section">
    <div class="container">
        <h2>Order Details</h2>
        <div class="order-summary">
            <h3>Order #<span th:text="${order.id}"></span></h3>
            <p>Date: <span th:text="${#dates.format(order.orderDate, 'dd-MM-yyyy HH:mm')}"></span></p>
            <p>Customer: <span th:text="${order.customerFullName}"></span></p>
            <p>Address: <span th:text="${order.address} + ', ' + ${order.city} + ', ' + ${order.country}"></span></p>
            <p>Total Amount: $<span th:text="${order.totalAmount}"></span></p>
            <p>Status: <span th:text="${order.status}"></span></p>
        </div>

        <div class="order-items">
            <h4>Items:</h4>
            <ul>
                <li th:each="item : ${order.orderItems}">
                    <span class="item-name" th:text="${item.productName}"></span>
                    <span class="item-quantity" th:text="'x ' + ${item.quantity}"></span>
                    <span class="item-price" th:text="'$' + ${item.price}"></span>
                </li>
            </ul>
        </div>

        <div class="order-actions">
            <form th:action="@{/admin/orders/update-status}" method="post">
                <input type="hidden" name="orderId" th:value="${order.id}">
                <label for="status">Update Status:</label>
                <select name="status" id="status">
                    <option th:value="Pending" th:selected="${order.status == 'Pending'}">Pending</option>
                    <option th:value="Shipped" th:selected="${order.status == 'Shipped'}">Shipped</option>
                    <option th:value="Delivered" th:selected="${order.status == 'Delivered'}">Delivered</option>
                    <option th:value="Canceled" th:selected="${order.status == 'Canceled'}">Canceled</option>
                </select>
                <button type="submit" class="btn btn-primary">Update Status</button>
            </form>

            <form th:action="@{/admin/orders/delete}" method="post" style="display:inline;">
                <input type="hidden" name="orderId" th:value="${order.id}">
                <button type="submit" class="btn btn-danger">Delete Order</button>
            </form>
        </div>
    </div>
</section>

<section class="info_section long_section" th:replace="~{fragments/info}"></section>
<div th:replace="~{fragments/footer}"></div>
<div th:replace="~{fragments/script}"></div>
</body>
</html>
